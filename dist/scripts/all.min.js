window.utils={parse:function(t,e){var a=null,n=t.split(/\n/g);return"tab"===e&&(e=/\t+/g),a=n.map(function(t){var a=t.split(e);return a})},isImage:function(t){var e=/\.(jpg|png|jpeg)$/;return e.test(t)}},function(t){function e(){var t=this;this.container=document.getElementById("tableContainer"),this.data=null,this.container.addEventListener("change",function(e){var a=parseInt(e.target.value,10);switch(e.target.id){case"sort":t.sortData(a);break;case"filter":t.filterIndex=a}}),this.container.addEventListener("keyup",function(e){"filterText"===e.target.id&&t.filterData(e.target.value)})}e.prototype.render=function(t){this.data=t,this.container.className="show",this.renderSortFilter(),this.renderTable()},e.prototype.renderTable=function(){var t=this,e=document.getElementById("startupTable"),a=this.filteredData||this.data;e.innerHTML="",a.forEach(function(a,n){var i=t.renderRow(a,n);e.appendChild(i)})},e.prototype.sortData=function(t){var e=this.data[0],a=this.data.slice(1);this.data=a.sort(function(e,a){return e[t].toUpperCase()>a[t].toUpperCase()?1:-1}),this.data=[e].concat(this.data),this.renderTable()},e.prototype.renderSortFilter=function(){this.renderSort(),this.renderFilters()},e.prototype.renderSort=function(){var t=document.getElementById("sort"),e=this.data[0];t.innerHTML="<option selected disabled>Select</option>",e.forEach(function(e,a){var n=document.createElement("option");n.value=a,n.innerText=e,t.appendChild(n)})},e.prototype.renderFilters=function(){var t=document.getElementById("filter"),e=this.data[0];t.innerHTML="<option selected disabled>Select</option>",e.forEach(function(e,a){var n=document.createElement("option");n.value=a,n.innerText=e,t.appendChild(n)})},e.prototype.filterData=function(t){var e=t.trim(),a=this;e&&this.filterIndex>=0?this.filteredData=this.data.filter(function(t,n){return 0===n||t[a.filterIndex].toLowerCase().indexOf(e.toLowerCase())>-1}):this.filteredData=null,this.renderTable()},e.prototype.renderRow=function(t,e){var a=document.createElement("tr"),n=this;return t.forEach(function(t){var i=n.renderCell(t,e);a.appendChild(i)}),a},e.prototype.renderCell=function(e,a){var n=null,i=null;return n=0===a?document.createElement("th"):document.createElement("td"),t.utils.isImage(e)?(i=document.createElement("img"),i.src=e,i.className="thumb",n.appendChild(i)):n.textContent=e,n},e.prototype.hide=function(){var t=document.getElementById("tableContainer");t.className="hide"},t.StartupTable=e}(window),function(t){function e(){this.data=null,this.hiddenRows=[],this.titleColumn=null,this.latitudeColumn=null,this.longitudeColumn=null,this.map=null}e.prototype.init=function(t,e,a,n,i){this.data=t,this.latitudeColumn=e,this.longitudeColumn=a,this.titleColumn=n,this.hiddenRows=i,this.validate()&&this.renderMap()},e.prototype.validate=function(){return this.data&&this.data.length?this.hiddenRows.length===this.data.length-1?(alert("All rows are hidden, there is nothing to render :("),!1):parseInt(this.latitudeColumn,10)>=0?parseInt(this.longitudeColumn,10)>=0?parseInt(this.titleColumn,10)>=0||(alert("Please specify a column for marker titles."),!1):(alert("Please specify a column for longitude."),!1):(alert("Please specify a column for latitude."),!1):(alert("Please enter valid data"),!1)},e.prototype.renderMap=function(){var t=this.data.slice(1),e=this,a=document.getElementById("mapContainer"),n=new google.maps.LatLngBounds;a.className="",this.map=new google.maps.Map(document.getElementById("map")),t.forEach(function(t,a){if(!e.hiddenRows.some(function(t,e){return a==e})){var i=new google.maps.LatLng(t[e.latitudeColumn],t[e.longitudeColumn]),o=new google.maps.Marker({position:i,map:e.map,title:t[e.titleColumn]});n.extend(o.getPosition())}}),e.map.fitBounds(n)},e.prototype.hide=function(){var t=document.getElementById("mapContainer");t.className="hide"},t.FoundersMap=e}(window),function(t){function e(){this.rawData="",this.data=null,this.separator=null,this.format="table",this.table=new t.StartupTable,this.map=new t.FoundersMap}e.prototype.setup=function(){var e=document.getElementById("generator"),a=this;e.addEventListener("submit",function(e){e.preventDefault();var n,i=e.target.data.value,o=e.target.separator.value,r=e.target.latitude.value,l=e.target.longitude.value,s=e.target.marker.value,d=[],u=e.target.hide.selectedOptions;for(n=0;n<u.length;n++)d.push(u[n].value);return i.trim()?(a.data=t.utils.parse(i.trim(),o),a.separator=o,void("table"===a.format?(a.table.render(a.data),a.map.hide(),t.scrollTo(0,document.body.scrollHeight)):(a.map.init(a.data,r,l,s,d),a.table.hide(),t.scrollTo(0,document.body.scrollHeight)))):void alert("Please enter valid csv data")}),e.addEventListener("change",function(t){switch(t.target.name){case"format":"map"===t.target.value?(a.setupMapOptions(),a.format="map"):(a.format="table",a.hideMapOptions())}}),e.addEventListener("input",function(e){var n=document.querySelector(".separator-section"),i=document.querySelector(".format-section");switch(e.target.name){case"separator":i.className="section format-section",a.data=t.utils.parse(a.rawData.trim(),e.target.value),a.separator=e.target.value,"map"===a.format&&a.setupMapOptions();break;case"data":a.rawData=e.target.value,a.separator&&(a.data=t.utils.parse(a.rawData.trim(),a.separator)),n.className="section separator-section"}})},e.prototype.setupMapOptions=function(){var t=document.querySelector(".map-section");t.className="section map-section",this.setupMapSelectors(),this.setupMapHideOptions()},e.prototype.setupMapSelectors=function(){var t=document.getElementById("latitude"),e=document.getElementById("longitude"),a=document.getElementById("markerTitle"),n=this.data[0],i=this;this.data.length>1&&(t.innerHTML="<option selected disabled>Select</option>",e.innerHTML="<option selected disabled>Select</option>",a.innerHTML="<option selected disabled>Select</option>",n.forEach(function(n,o){var r=Math.abs(i.data[1][o])>=0,l=document.createElement("option"),s=document.createElement("option"),d=document.createElement("option");hideOption=document.createElement("option"),r&&(l.value=o,l.innerText=n,t.appendChild(l),s.value=o,s.innerText=n,e.appendChild(s)),d.value=o,d.innerText=n,a.appendChild(d)}))},e.prototype.setupMapHideOptions=function(){var t=this.data.slice(1),e=this,a=document.getElementById("hide");a.innerHTML="",t.forEach(function(t,n){var i=document.createElement("option");i.innerText=t.join(" "+e.separator+" "),i.value=n,a.appendChild(i)})},e.prototype.hideMapOptions=function(){var t=document.querySelector(".map-section");t.className+=" hide"},t.Foundry=e}(window),function(t){var e=new t.Foundry;e.setup()}(window);