window.utils={parse:function(t,e){var n=null,a=t.split(/\n/g);return"tab"===e&&(e=/\t+/g),n=a.map(function(t){var n=t.split(e);return n})},isImage:function(t){var e=/\.(jpg|png|jpeg)$/;return e.test(t)},isLink:function(t){var e=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi;return e.test(t)}},function(t){function e(){var t=this;this.container=document.getElementById("tableContainer"),this.data=null,this.container.addEventListener("change",function(e){var n=parseInt(e.target.value,10);switch(e.target.id){case"sort":t.sortData(n);break;case"filter":t.filterIndex=n}}),this.container.addEventListener("keyup",function(e){"filterText"===e.target.id&&t.filterData(e.target.value)})}e.prototype.render=function(t){this.data=t,this.container.className="show",this.renderSortFilter(),this.renderTable()},e.prototype.renderTable=function(){var t=this,e=document.getElementById("startupTable"),n=this.filteredData||this.data;e.innerHTML="",n.forEach(function(n,a){var i=t.renderRow(n,a);e.appendChild(i)})},e.prototype.sortData=function(t){var e=this.data[0],n=this.data.slice(1);this.data=n.sort(function(e,n){return e[t].toUpperCase()>n[t].toUpperCase()?1:-1}),this.data=[e].concat(this.data),this.renderTable()},e.prototype.renderSortFilter=function(){this.renderSort(),this.renderFilters()},e.prototype.renderSort=function(){var t=document.getElementById("sort"),e=this.data[0];t.innerHTML="<option selected disabled>Select</option>",e.forEach(function(e,n){var a=document.createElement("option");a.value=n,a.innerText=e,t.appendChild(a)})},e.prototype.renderFilters=function(){var t=document.getElementById("filter"),e=this.data[0];t.innerHTML="<option selected disabled>Select</option>",e.forEach(function(e,n){var a=document.createElement("option");a.value=n,a.innerText=e,t.appendChild(a)})},e.prototype.filterData=function(t){var e=t.trim(),n=this;e&&this.filterIndex>=0?this.filteredData=this.data.filter(function(t,a){return 0===a||t[n.filterIndex].toLowerCase().indexOf(e.toLowerCase())>-1}):this.filteredData=null,this.renderTable()},e.prototype.renderRow=function(t,e){var n=document.createElement("tr"),a=this;return t.forEach(function(t){var i=a.renderCell(t,e);n.appendChild(i)}),n},e.prototype.renderCell=function(e,n){var a=null,i=null;return a=0===n?document.createElement("th"):document.createElement("td"),t.utils.isImage(e)?(i=document.createElement("img"),i.src=e,i.className="thumb",a.appendChild(i)):t.utils.isLink(e)?(i=document.createElement("a"),i.href=e,i.innerText="Link",i.className="link",a.appendChild(i)):a.textContent=e,a},e.prototype.hide=function(){var t=document.getElementById("tableContainer");t.className="hide"},t.StartupTable=e}(window),function(t){function e(){this.data=null,this.hiddenRows=[],this.titleColumn=null,this.latitudeColumn=null,this.longitudeColumn=null,this.map=null}e.prototype.init=function(t,e,n,a,i){this.data=t,this.latitudeColumn=e,this.longitudeColumn=n,this.titleColumn=a,this.hiddenRows=i,this.validate()&&this.renderMap()},e.prototype.validate=function(){return this.data&&this.data.length?this.hiddenRows.length===this.data.length-1?(alert("All rows are hidden, there is nothing to render :("),!1):parseInt(this.latitudeColumn,10)>=0?parseInt(this.longitudeColumn,10)>=0?parseInt(this.titleColumn,10)>=0||(alert("Please specify a column for marker titles."),!1):(alert("Please specify a column for longitude."),!1):(alert("Please specify a column for latitude."),!1):(alert("Please enter valid data"),!1)},e.prototype.renderMap=function(){var t=this.data.slice(1),e=this,n=document.getElementById("mapContainer"),a=new google.maps.LatLngBounds;n.className="",this.map=new google.maps.Map(document.getElementById("map")),t.forEach(function(t,n){if(!e.hiddenRows.some(function(t,e){return n==e})){var i=new google.maps.LatLng(t[e.latitudeColumn],t[e.longitudeColumn]),r=new google.maps.Marker({position:i,map:e.map,title:t[e.titleColumn]});a.extend(r.getPosition())}}),e.map.fitBounds(a)},e.prototype.hide=function(){var t=document.getElementById("mapContainer");t.className="hide"},t.FoundersMap=e}(window),function(t){function e(){this.rawData="",this.data=null,this.separator=null,this.format="table",this.table=new t.StartupTable,this.map=new t.FoundersMap}e.prototype.setup=function(){var e=document.getElementById("generator"),n=this;e.addEventListener("submit",function(e){e.preventDefault();var a,i=e.target.data.value,r=e.target.separator.value,o=e.target.latitude.value,l=e.target.longitude.value,s=e.target.marker.value,d=[],u=e.target.hide.selectedOptions;for(a=0;a<u.length;a++)d.push(u[a].value);return i.trim()?(n.data=t.utils.parse(i.trim(),r),n.separator=r,void("table"===n.format?(n.table.render(n.data),n.map.hide(),t.scrollTo(0,document.body.scrollHeight)):(n.map.init(n.data,o,l,s,d),n.table.hide(),t.scrollTo(0,document.body.scrollHeight)))):void alert("Please enter valid csv data")}),e.addEventListener("change",function(e){var a=document.querySelector(".format-section");switch(e.target.name){case"format":"map"===e.target.value?(n.setupMapOptions(),n.format="map"):(n.format="table",n.hideMapOptions());break;case"separator":a.className="section format-section",n.data=t.utils.parse(n.rawData.trim(),e.target.value),n.separator=e.target.value,"map"===n.format&&n.setupMapOptions()}}),e.addEventListener("input",function(e){var a=document.querySelector(".separator-section");switch(e.target.name){case"data":n.rawData=e.target.value,n.separator&&(n.data=t.utils.parse(n.rawData.trim(),n.separator)),a.className="section separator-section"}})},e.prototype.setupMapOptions=function(){var t=document.querySelector(".map-section");t.className="section map-section",this.setupMapSelectors(),this.setupMapHideOptions()},e.prototype.setupMapSelectors=function(){var t=document.getElementById("latitude"),e=document.getElementById("longitude"),n=document.getElementById("markerTitle"),a=this.data[0],i=this;this.data.length>1&&(t.innerHTML="<option selected disabled>Select</option>",e.innerHTML="<option selected disabled>Select</option>",n.innerHTML="<option selected disabled>Select</option>",a.forEach(function(a,r){var o=Math.abs(i.data[1][r])>=0,l=document.createElement("option"),s=document.createElement("option"),d=document.createElement("option");hideOption=document.createElement("option"),o&&(l.value=r,l.innerText=a,t.appendChild(l),s.value=r,s.innerText=a,e.appendChild(s)),d.value=r,d.innerText=a,n.appendChild(d)}))},e.prototype.setupMapHideOptions=function(){var t=this.data.slice(1),e=this,n=document.getElementById("hide");n.innerHTML="",t.forEach(function(t,a){var i=document.createElement("option");i.innerText=t.join(" "+e.separator+" "),i.value=a,n.appendChild(i)})},e.prototype.hideMapOptions=function(){var t=document.querySelector(".map-section");t.className+=" hide"},t.Foundry=e}(window),function(t){var e=new t.Foundry;e.setup()}(window);